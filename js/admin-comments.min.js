!function(){async function n(n){try{await deleteCommentFromFirebase(n),await t(),"function"==typeof showToast&&showToast("Comment deleted successfully","success")}catch(n){console.error("Error deleting comment:",n),"function"==typeof showToast&&showToast("Error deleting comment","error")}}async function t(){const n=document.getElementById("comments-list");if(n){n.innerHTML='<div class="loading">Loading comments...</div>';try{const t=await async function(){try{return await getAllCommentsFromFirebase()}catch(n){return console.error("Error getting comments:",n),[]}}(),e=await async function(){try{return await getBlogPostsFromFirebase()}catch(n){return console.error("Error getting blog posts:",n),[]}}(),o={};e.forEach(n=>{o[n.id]=n.title});const s={};t.forEach(n=>{s[n.postId]||(s[n.postId]=[]),s[n.postId].push(n)});let a="",i=t.length;for(const n in s){const t=s[n];if(t&&t.length>0){const e=o[n]||"Unknown Post";a+=`\n                        <div class="admin-comment-group">\n                            <h3 class="admin-comment-post-title">\n                                üìù ${e}\n                                <span class="comment-count">(${t.length} comment${1!==t.length?"s":""})</span>\n                            </h3>\n                            <div class="admin-comments-list">\n                    `,t.forEach(n=>{const t=n.date||new Date(n.timestamp).toLocaleDateString(),o=n.text||n.comment||"",s=n.name||n.author||"Anonymous";a+=`\n                            <div class="admin-comment-item">\n                                <div class="admin-comment-header">\n                                    <div>\n                                        <strong>${s}</strong>\n                                        <span class="admin-comment-date">${t}</span>\n                                    </div>\n                                    <button \n                                        class="btn-delete" \n                                        onclick="handleAdminDeleteComment('${n.id}', '${e.replace(/'/g,"\\'")}')"\n                                        title="Delete comment">\n                                        üóëÔ∏è Delete\n                                    </button>\n                                </div>\n                                <div class="admin-comment-text">${o}</div>\n                            </div>\n                        `}),a+="\n                            </div>\n                        </div>\n                    "}}n.innerHTML=0===i?'\n                    <div class="empty-state">\n                        <p>üí¨ No comments yet</p>\n                        <p style="color: #6b7280;">Comments from blog posts will appear here</p>\n                    </div>\n                ':a}catch(t){console.error("Error loading comments:",t),n.innerHTML=`\n                <div class="empty-state">\n                    <p>‚ùå Error loading comments</p>\n                    <p style="color: #6b7280;">${t.message}</p>\n                </div>\n            `}}}localStorage.getItem("adminAuth")?(window.handleAdminDeleteComment=async function(t,e){if("function"!=typeof showConfirm)return void(confirm("Are you sure you want to delete this comment?")&&await n(t));await showConfirm("Delete Comment?",`Are you sure you want to delete this comment from "${e}"? This action cannot be undone.`,"Delete","Cancel")&&await n(t)},window.loadAdminComments=t,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t()):window.location.href="admin.html"}();