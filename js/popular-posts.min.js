!function(){let t=null,e=0;function o(t){const e=localStorage.getItem("postViews");return(e?JSON.parse(e):{})[t]||0}async function n(){const n=document.getElementById("popular-posts-grid");if(!n)return;const s=Date.now();if(t&&s-e<6e5)return console.log("üì¶ Using cached popular posts"),void(n.innerHTML=t);let a=[];try{if("function"==typeof getBlogPostsFromFirebase)a=await getBlogPostsFromFirebase();else{const t=localStorage.getItem("blogPosts");a=t?JSON.parse(t):[]}}catch(t){console.error("Error loading posts:",t);const e=localStorage.getItem("blogPosts");a=e?JSON.parse(e):[]}if(0===a.length)return void(n.innerHTML='<p style="text-align: center; color: var(--text-light);">No posts available yet.</p>');const r=a.map(t=>({...t,views:o(t.id)})).sort((t,e)=>e.views-t.views).slice(0,3);if(0===r.length)return void(n.innerHTML='<p style="text-align: center; color: var(--text-light);">No posts available yet.</p>');const l=r.map((t,e)=>{const o=function(t){if(!t)return 1;const e=t.trim().split(/\s+/).length;return Math.ceil(e/200)}(t.content);return`\n                <a href="blog-post.html?id=${t.id}" class="popular-post-card">\n                    <img src="${t.image}" alt="${t.title}" loading="lazy">\n                    <div class="popular-post-content">\n                        <span class="popular-post-badge">${["üî• Most Popular","‚≠ê Trending","üëç Popular"][e]||"üìñ Popular"}</span>\n                        <div class="popular-post-meta">${t.date} ‚Ä¢ ${o} min read ‚Ä¢ ${t.views} views</div>\n                        <h3>${t.title}</h3>\n                        <p>${t.excerpt}</p>\n                    </div>\n                </a>\n            `}).join("");t=l,e=s,n.innerHTML=l}"v2"!==localStorage.getItem("popularPostsCacheVersion")&&(localStorage.removeItem("popularPostsCache"),localStorage.setItem("popularPostsCacheVersion","v2")),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n()}();