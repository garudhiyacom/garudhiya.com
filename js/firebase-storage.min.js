async function uploadImageToFirebase(e,r="images"){try{const o=`${r}/${Date.now()}_${e.name}`,t=storage.ref(o),a=await t.put(e),n=await a.ref.getDownloadURL();return console.log("✅ Image uploaded to Firebase Storage"),n}catch(e){throw console.error("❌ Error uploading image:",e),e}}async function deleteImageFromFirebase(e){try{const r=getPathFromUrl(e);if(!r)return;const o=storage.ref(r);await o.delete(),console.log("✅ Image deleted from Firebase Storage")}catch(e){console.error("❌ Error deleting image:",e)}}function getPathFromUrl(e){try{if(!e||!e.includes("firebase"))return null;const r="https://firebasestorage.googleapis.com/v0/b/";if(!e.startsWith(r))return null;const o=e.split("/o/")[1]?.split("?")[0];return o?decodeURIComponent(o):null}catch(e){return console.error("Error parsing URL:",e),null}}async function uploadImageWithProgress(e,r="images",o){try{const t=`${r}/${Date.now()}_${e.name}`,a=storage.ref(t),n=a.put(e);n.on("state_changed",e=>{const r=e.bytesTransferred/e.totalBytes*100;o&&o(r)},e=>{throw console.error("Upload error:",e),e}),await n;const i=await a.getDownloadURL();return console.log("✅ Image uploaded with progress tracking"),i}catch(e){throw console.error("❌ Error uploading image:",e),e}}function validateImageFile(e){if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(e.type))throw new Error("Invalid file type. Please upload an image (JPEG, PNG, GIF, or WebP).");if(e.size>5242880)throw new Error("File too large. Maximum size is 5MB.");return!0}