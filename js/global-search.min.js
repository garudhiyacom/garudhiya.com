!function(){const e=document.getElementById("global-search"),t=document.getElementById("search-results");if(!e||!t)return;let n;function s(e){if(!e||e.length<2)return void t.classList.remove("active");const n=e.toLowerCase(),s=function(){const e=localStorage.getItem("products");return e?JSON.parse(e):[]}(),c=function(){const e=localStorage.getItem("blogPosts");return e?JSON.parse(e):[]}();!function(e,n,s){if(0===e.length&&0===n.length)return t.innerHTML=`\n                <div class="search-no-results">\n                    No results found for "${s}"\n                </div>\n            `,void t.classList.add("active");let c="";e.length>0&&(c+='<div class="search-section"><h4>Products</h4>',e.forEach(e=>{c+=`\n                    <a href="products.html" class="search-result-item">\n                        <strong>${e.name}</strong>\n                        <span>${e.price}</span>\n                    </a>\n                `}),c+="</div>");n.length>0&&(c+='<div class="search-section"><h4>Blog Posts</h4>',n.forEach(e=>{c+=`\n                    <a href="blog-post.html?id=${e.id}" class="search-result-item">\n                        <strong>${e.title}</strong>\n                        <span>${e.date}</span>\n                    </a>\n                `}),c+="</div>");t.innerHTML=c,t.classList.add("active")}(s.filter(e=>e.name.toLowerCase().includes(n)||e.description.toLowerCase().includes(n)).slice(0,3),c.filter(e=>e.title.toLowerCase().includes(n)||e.excerpt.toLowerCase().includes(n)||e.content&&e.content.toLowerCase().includes(n)).slice(0,3),e)}function c(){const n=function(){const e=localStorage.getItem("recentSearches");return e?JSON.parse(e):[]}();if(0===n.length)return void t.classList.remove("active");let c='<div class="search-section"><h4>Recent Searches</h4>';n.forEach(e=>{c+=`\n                <a href="#" class="search-result-item recent-search" data-query="${e}">\n                    <strong>üïê ${e}</strong>\n                </a>\n            `}),c+="</div>",t.innerHTML=c,t.classList.add("active"),t.querySelectorAll(".recent-search").forEach(t=>{t.addEventListener("click",function(t){t.preventDefault();const n=this.getAttribute("data-query");e.value=n,s(n)})})}e.addEventListener("input",function(e){clearTimeout(n);const c=e.target.value.trim();c.length<2?t.classList.remove("active"):n=setTimeout(()=>{s(c),c.length>=3&&function(e){const t=localStorage.getItem("recentSearches");let n=t?JSON.parse(t):[];n=n.filter(t=>t.toLowerCase()!==e.toLowerCase()),n.unshift(e),n=n.slice(0,5),localStorage.setItem("recentSearches",JSON.stringify(n))}(c)},300)}),e.addEventListener("focus",function(){const e=this.value.trim();e.length>=2?s(e):c()}),document.addEventListener("click",function(n){e.contains(n.target)||t.contains(n.target)||t.classList.remove("active")}),t.addEventListener("click",function(e){e.stopPropagation()})}();