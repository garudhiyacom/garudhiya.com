<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Blog Posts</title>
</head>
<body>
    <h1>Blog Posts Test</h1>
    <div id="output"></div>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    
    <script>
        // Simple Firebase config without storage
        const firebaseConfig = {
            apiKey: "AIzaSyA6h3BOMic5rOhR0htEebFJJAXt-p4rcd4",
            authDomain: "garudhiyasite.firebaseapp.com",
            projectId: "garudhiyasite",
            storageBucket: "garudhiyasite.firebasestorage.app",
            messagingSenderId: "419040913883",
            appId: "1:419040913883:web:9d8d7f6b450140b695dffe",
            measurementId: "G-ELT2EH6MQ1"
        };
        
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        
        // Simple function to get blog posts
        async function getBlogPostsFromFirebase() {
            const snapshot = await db.collection('blogPosts').get();
            return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
        }
    </script>

    <script>
        async function testBlogPosts() {
            const output = document.getElementById('output');
            output.innerHTML = '<p>Loading blog posts...</p>';
            
            try {
                const posts = await getBlogPostsFromFirebase();
                
                if (posts.length === 0) {
                    output.innerHTML = '<p style="color: red;">No blog posts found in Firebase!</p>';
                    return;
                }
                
                output.innerHTML = `
                    <h2>Found ${posts.length} blog posts:</h2>
                    <ul>
                        ${posts.map(post => `
                            <li>
                                <strong>ID:</strong> ${post.id} (type: ${typeof post.id})<br>
                                <strong>Title:</strong> ${post.title}<br>
                                <strong>Link:</strong> <a href="/blog/${post.id}">/blog/${post.id}</a><br>
                                <strong>Old Link:</strong> <a href="blog-post.html?id=${post.id}">blog-post.html?id=${post.id}</a>
                            </li>
                        `).join('')}
                    </ul>
                `;
            } catch (error) {
                output.innerHTML = `<p style="color: red;">Error: ${error.message}</p>`;
                console.error('Error loading posts:', error);
            }
        }

        // Wait for Firebase to initialize
        setTimeout(testBlogPosts, 1000);
    </script>
</body>
</html>
