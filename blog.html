<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Garudhiya — Blog</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>

<header class="site-header">
    <a href="index.html" class="logo-link"><h1 class="logo">Garudhiya</h1></a>

    <div class="hamburger" aria-label="Toggle navigation" role="button" tabindex="0">
        <span></span><span></span><span></span>
    </div>

    <nav class="site-nav">
        <a href="index.html" class="nav-link">Home</a>
        <a href="products.html" class="nav-link">Products</a>
        <a href="blog.html" class="nav-link active">Blog</a>
        <a href="contact.html" class="nav-link">Contact</a>
    </nav>
</header>

<main class="main-content">
    <section class="blog-section">
        <h2 class="text-center mt-2 mb-2">Garudhiya Blog</h2>

        <!-- Grid where the cards will be injected -->
        <div id="blogGrid" class="blogs-grid"></div>

        <!-- Pagination bar -->
        <nav id="blogPagination" class="pagination" aria-label="Blog pagination"></nav>
    </section>
</main>

<footer class="site-footer">
    © 2025 Garudhiya • All rights reserved
</footer>

<script src="assets/js/blog-data.js"></script>
<script src="assets/js/script.js"></script>

<script>
const POSTS_PER_PAGE = 9;

function renderBlogPage(page = 1) {
    const grid = document.getElementById('blogGrid');
    const pagination = document.getElementById('blogPagination');

    if (!grid || !pagination) return;

    grid.innerHTML = '';
    pagination.innerHTML = '';

    const startIdx = (page - 1) * POSTS_PER_PAGE;
    const endIdx = startIdx + POSTS_PER_PAGE;
    const pagePosts = BLOGS.slice(startIdx, endIdx);

    if (pagePosts.length === 0) {
        grid.innerHTML = '<p class="text-center">No posts found for this page.</p>';
        return;
    }

    pagePosts.forEach(post => {
        const card = document.createElement('article');
        card.className = 'card blog-card';

        const img = document.createElement('img');
        img.dataset.src = post.img;
        img.alt = post.title;
        img.className = 'blog-img';
        card.appendChild(img);

        const info = document.createElement('div');
        info.className = 'blog-info';

        const title = document.createElement('h3');
        title.className = 'blog-title';
        title.textContent = post.title;
        info.appendChild(title);

        const meta = document.createElement('p');
        meta.className = 'blog-meta';
        meta.textContent = `${post.author} • ${new Date(post.date).toLocaleDateString()}`;
        info.appendChild(meta);

        const excerpt = document.createElement('p');
        excerpt.className = 'blog-excerpt';
        excerpt.textContent = post.excerpt;
        info.appendChild(excerpt);

        const readMore = document.createElement('a');
        readMore.className = 'btn-primary blog-readmore';
        readMore.href = `blog-detail.html?id=${post.id}`;
        readMore.textContent = 'Read More';
        info.appendChild(readMore);

        card.appendChild(info);
        grid.appendChild(card);
    });

    initLazyImages();

    const totalPages = Math.ceil(BLOGS.length / POSTS_PER_PAGE);
    for (let i = 1; i <= totalPages; i++) {
        const btn = document.createElement('button');
        btn.textContent = i;
        btn.className = (i === page) ? 'active' : '';
        btn.setAttribute('aria-label', `Page ${i}`);
        btn.setAttribute('aria-current', i === page ? 'page' : 'false');
        btn.addEventListener('click', () => {
            renderBlogPage(i);
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
        pagination.appendChild(btn);
    }
}

document.addEventListener('DOMContentLoaded', () => {
    renderBlogPage(1);
});
</script>
</body>
</html>
