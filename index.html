<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Discover traditional Maldivian wellness through Garudhiya energy drinks and island recipes.">
    <title>Garudhiya — Island Energy & Wellness</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>

<a href="#main-content" class="skip-link">Skip to main content</a>

<header class="site-header">
    <div class="header-container">
        <a href="index.html" class="logo-link" aria-label="Garudhiya Home">
            <h1 class="logo">Garudhiya</h1>
        </a>

        <div class="hamburger" aria-label="Toggle navigation" role="button" tabindex="0" aria-expanded="false">
            <span></span><span></span><span></span>
        </div>

        <nav class="site-nav" aria-label="Main navigation">
            <div class="search-container">
                <svg class="search-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                    <circle cx="11" cy="11" r="8"></circle>
                    <path d="m21 21-4.35-4.35"></path>
                </svg>
                <input type="search" id="globalSearch" class="search-bar" placeholder="Search everything..." aria-label="Search site">
            </div>
            <a href="index.html" class="nav-link active">Home</a>
            <a href="products.html" class="nav-link">Products</a>
            <a href="blog.html" class="nav-link">Blog</a>
            <a href="contact.html" class="nav-link">Contact</a>
        </nav>
    </div>
</header>

<main class="main-content" id="main-content">

    <!-- HERO -->
    <section class="hero" aria-labelledby="hero-title">
        <div class="hero-content">
            <h2 id="hero-title">Discover Island Wellness</h2>
            <p class="hero-sub">Where traditional Maldivian wisdom meets modern living. Explore our stories, recipes, and natural energy solutions.</p>
            <a href="blog.html" class="btn btn-primary hero-btn">Explore Our Stories</a>
        </div>
    </section>

    <!-- STATS -->
    <section class="stats-grid container" aria-label="Key statistics">
        <div class="stat-card">
            <span class="stat-number">100%</span>
            <span class="stat-label">Natural & Organic</span>
        </div>
        <div class="stat-card">
            <span class="stat-number">10+</span>
            <span class="stat-label">Blog Stories</span>
        </div>
        <div class="stat-card">
            <span class="stat-number">5★</span>
            <span class="stat-label">Reader Rated</span>
        </div>
        <div class="stat-card">
            <span class="stat-number">Weekly</span>
            <span class="stat-label">New Content</span>
        </div>
    </section>

    <!-- FEATURED PRODUCT -->
    <section class="container" aria-labelledby="featured-product-title">
        <div class="section-header">
            <h2 class="section-title" id="featured-product-title">Featured Product</h2>
            <a href="products.html" class="section-link">View All Products →</a>
        </div>
        
        <div id="featuredProduct" class="featured-product-card">
            <!-- Product will be loaded dynamically -->
        </div>
    </section>

    <!-- LATEST BLOG POSTS -->
    <section class="container" aria-labelledby="latest-stories-title">
        <div class="section-header">
            <h2 class="section-title" id="latest-stories-title">Latest Stories</h2>
            <a href="blog.html" class="section-link">View All Posts →</a>
        </div>
        
        <div id="latestBlogPosts" class="blog-grid"></div>
    </section>

    <!-- NEWSLETTER CTA -->
    <section class="container cta-section" aria-labelledby="newsletter-title">
        <h2 id="newsletter-title">Join Our Community</h2>
        <p>Get the latest stories, island recipes, and wellness tips delivered to your inbox every week.</p>

        <form id="newsletterForm" class="form-container" novalidate>
            <div class="form-group">
                <input type="email"
                       name="email"
                       id="newsletter-email"
                       class="form-input"
                       placeholder=" "
                       required
                       aria-describedby="newsletter-error">
                <label for="newsletter-email" class="form-label">Your email address</label>
                <p class="error-msg" id="newsletter-error" role="alert">Please enter a valid email.</p>
            </div>
            <button type="submit" class="btn btn-primary">Subscribe Now</button>
        </form>
        <div id="toast" class="toast hidden" role="status" aria-live="polite"></div>
    </section>

</main>

<footer class="site-footer">
    © 2025 Garudhiya • All rights reserved
</footer>

<script src="assets/js/products-data.js"></script>
<script src="assets/js/blog-data.js"></script>
<script src="assets/js/script.js"></script>
<script>
// Load featured product and blog posts on homepage
document.addEventListener('DOMContentLoaded', () => {
    loadFeaturedProduct();
    loadLatestBlogPosts();
    initGlobalSearch();
});

function loadFeaturedProduct() {
    const productContainer = document.getElementById('featuredProduct');
    if (!productContainer || !window.PRODUCTS || PRODUCTS.length === 0) return;

    // Sort products by date (newest first)
    const sortedProducts = [...PRODUCTS].sort((a, b) => new Date(b.date) - new Date(a.date));
    const featuredProduct = sortedProducts[0];
    
    productContainer.innerHTML = `
        <img data-src="${featuredProduct.image}"
             alt="${featuredProduct.name}"
             class="product-image"
             loading="lazy">

        <div class="product-content">
            <h3 class="product-title">${featuredProduct.name}</h3>
            <p class="product-description">
                ${featuredProduct.shortDescription}
            </p>
            <div class="product-actions">
                <span class="product-price">$${featuredProduct.price.toFixed(2)}</span>
                <a href="products.html" class="btn btn-primary">Learn More</a>
            </div>
        </div>
    `;
    
    initLazyImages();
}

function loadLatestBlogPosts() {
    const blogContainer = document.getElementById('latestBlogPosts');
    if (!blogContainer || !window.BLOGS) return;

    // Sort blogs by date (newest first)
    const sortedBlogs = [...BLOGS].sort((a, b) => {
        const dateCompare = new Date(b.date) - new Date(a.date);
        return dateCompare !== 0 ? dateCompare : b.id - a.id;
    });

    renderBlogPosts(sortedBlogs, blogContainer, { limit: 3 });
}

function initGlobalSearch() {
    const globalSearchInput = document.getElementById('globalSearch');
    if (!globalSearchInput || !window.BLOGS) return;

    let searchTimeout;
    
    globalSearchInput.addEventListener('input', (e) => {
        clearTimeout(searchTimeout);
        searchTimeout = setTimeout(() => {
            const query = e.target.value.toLowerCase().trim();
            
            if (query.length < 2) return;

            const blogResults = BLOGS.filter(post => 
                post.title.toLowerCase().includes(query) ||
                post.excerpt.toLowerCase().includes(query) ||
                post.author.toLowerCase().includes(query) ||
                post.content.toLowerCase().includes(query)
            );

            console.log(`Found ${blogResults.length} blog results for: "${query}"`);
        }, 300);
    });
    
    globalSearchInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
            e.preventDefault();
            const query = e.target.value.trim();
            if (query) {
                window.location.href = `blog.html?q=${encodeURIComponent(query)}`;
            }
        }
    });
}
</script>
</body>
</html>
