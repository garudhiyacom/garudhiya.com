<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Garudhiya — Blood of the Maldivians</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>

<header class="site-header">
    <a href="index.html" class="logo-link"><h1 class="logo">Garudhiya</h1></a>

    <div class="hamburger" aria-label="Toggle navigation" role="button" tabindex="0">
        <span></span><span></span><span></span>
    </div>

    <nav class="site-nav">
        <div class="search-container">
            <svg class="search-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"></circle>
                <path d="m21 21-4.35-4.35"></path>
            </svg>
            <input type="text" id="globalSearch" class="search-bar" placeholder="Search everything...">
        </div>
        <a href="index.html" class="nav-link active">Home</a>
        <a href="products.html" class="nav-link">Products</a>
        <a href="blog.html" class="nav-link">Blog</a>
        <a href="contact.html" class="nav-link">Contact</a>
    </nav>
</header>

<main class="main-content">

    <!-- HERO -->
    <section class="hero">
        <div class="hero-content">
            <h2>Pure Island Energy</h2>
            <p class="hero-sub">Traditional Maldivian flavor meets modern performance. Fuel your adventures with nature's finest energy drink</p>
            <a href="products.html" class="btn-primary hero-btn">Explore Products</a>
        </div>
    </section>

    <!-- STATS -->
    <section class="stats-grid">
        <div class="stat-card">
            <span class="stat-number">100%</span>
            <span class="stat-label">Natural Ingredients</span>
        </div>
        <div class="stat-card">
            <span class="stat-number">10+</span>
            <span class="stat-label">Blog Articles</span>
        </div>
        <div class="stat-card">
            <span class="stat-number">5★</span>
            <span class="stat-label">Customer Rating</span>
        </div>
        <div class="stat-card">
            <span class="stat-number">24/7</span>
            <span class="stat-label">Support Available</span>
        </div>
    </section>

    <!-- FEATURED PRODUCT -->
    <section class="featured-product">
        <div class="section-header">
            <h2 class="section-title">Featured Product</h2>
            <a href="products.html" class="section-link">View All Products →</a>
        </div>
        
        <div id="featuredProduct" class="card product-card featured-card">
            <!-- Product will be loaded dynamically -->
        </div>
    </section>

    <!-- LATEST BLOG POSTS -->
    <section>
        <div class="section-header">
            <h2 class="section-title">Latest from Our Blog</h2>
            <a href="blog.html" class="section-link">View All Posts →</a>
        </div>
        
        <div id="latestBlogPosts" class="blog-preview-grid"></div>
    </section>

    <!-- NEWSLETTER CTA -->
    <section class="cta-section text-center mt-2 mb-2">
        <h2>Stay Fresh</h2>
        <p>Get new articles, product drops, and exclusive product discounts delivered to your inbox.</p>

        <form id="newsletterForm" class="contact-form" novalidate>
            <div class="form-group">
                <input type="email"
                       name="email"
                       id="newsletter-email"
                       placeholder=" "
                       required>
                <label for="newsletter-email">Your e-mail</label>
                <p class="error-msg">Please enter a valid e-mail.</p>
            </div>
            <button type="submit" class="btn-primary">Subscribe</button>
        </form>
        <div id="toast" class="toast hidden"></div>
    </section>

</main>

<footer class="site-footer">
    © 2025 Garudhiya • All rights reserved
</footer>

<script src="assets/js/products-data.js"></script>
<script src="assets/js/blog-data.js"></script>
<script src="assets/js/script.js"></script>
<script>
// Load featured product (latest) on homepage
document.addEventListener('DOMContentLoaded', () => {
    // Load featured product
    const productContainer = document.getElementById('featuredProduct');
    if (productContainer && PRODUCTS.length > 0) {
        // Sort products by date (newest first)
        const sortedProducts = [...PRODUCTS].sort((a, b) => new Date(b.dateAdded) - new Date(a.dateAdded));
        const featuredProduct = sortedProducts[0];
        
        productContainer.innerHTML = `
            <img src="${featuredProduct.image}"
                 alt="${featuredProduct.name}"
                 class="product-img">

            <div class="product-info">
                <h3 class="product-title">${featuredProduct.name}</h3>
                <p class="product-description">
                    ${featuredProduct.shortDescription}
                </p>
                <div class="price-and-action">
                    <span class="price-badge">${featuredProduct.price.toFixed(2)}</span>
                    <a href="products.html" class="btn-primary buy-btn">Learn More</a>
                </div>
            </div>
        `;
    }
    
    // Load latest 3 blog posts
    const blogContainer = document.getElementById('latestBlogPosts');
    if (!blogContainer) return;

    // Sort blogs by date (newest first)
    const sortedBlogs = [...BLOGS].sort((a, b) => {
        const dateCompare = new Date(b.date) - new Date(a.date);
        return dateCompare !== 0 ? dateCompare : b.id - a.id;
    });

    const latestPosts = sortedBlogs.slice(0, 3);

    latestPosts.forEach(post => {
        const card = document.createElement('article');
        card.className = 'card blog-card';

        const img = document.createElement('img');
        img.dataset.src = post.img;
        img.alt = post.title;
        img.className = 'blog-img';
        card.appendChild(img);

        const info = document.createElement('div');
        info.className = 'blog-info';

        const title = document.createElement('h3');
        title.className = 'blog-title';
        title.textContent = post.title;
        info.appendChild(title);

        const meta = document.createElement('p');
        meta.className = 'blog-meta';
        meta.textContent = `${post.author} • ${new Date(post.date).toLocaleDateString()}`;
        info.appendChild(meta);

        const excerpt = document.createElement('p');
        excerpt.className = 'blog-excerpt';
        excerpt.textContent = post.excerpt;
        info.appendChild(excerpt);

        const readMore = document.createElement('a');
        readMore.className = 'btn-secondary blog-readmore';
        readMore.href = `blog-detail.html?id=${post.id}`;
        readMore.textContent = 'Read More';
        info.appendChild(readMore);

        card.appendChild(info);
        blogContainer.appendChild(card);
    });

    initLazyImages();
});

// Global search functionality for homepage
const globalSearchInput = document.getElementById('globalSearch');
if (globalSearchInput) {
    let searchTimeout;
    globalSearchInput.addEventListener('input', (e) => {
        clearTimeout(searchTimeout);
        searchTimeout = setTimeout(() => {
            const query = e.target.value.toLowerCase().trim();
            
            if (query.length < 2) {
                return;
            }

            const blogResults = BLOGS.filter(post => 
                post.title.toLowerCase().includes(query) ||
                post.excerpt.toLowerCase().includes(query) ||
                post.author.toLowerCase().includes(query) ||
                post.content.toLowerCase().includes(query)
            );

            console.log(`Found ${blogResults.length} blog results for: "${query}"`);
        }, 300);
    });
    
    globalSearchInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            const query = e.target.value.trim();
            if (query) {
                window.location.href = `blog.html?q=${encodeURIComponent(query)}`;
            }
        }
    });
}
</script>
</body>
</html>
