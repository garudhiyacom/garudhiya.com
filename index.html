<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Garudhiya — Island Energy & Soup</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>

<header class="site-header">
    <a href="index.html" class="logo-link"><h1 class="logo">Garudhiya</h1></a>

    <div class="search-container">
        <svg class="search-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
        </svg>
        <input type="text" id="globalSearch" class="search-bar" placeholder="Search products, blog posts...">
    </div>

    <div class="hamburger" aria-label="Toggle navigation" role="button" tabindex="0">
        <span></span><span></span><span></span>
    </div>

    <nav class="site-nav">
        <a href="index.html" class="nav-link active">Home</a>
        <a href="products.html" class="nav-link">Products</a>
        <a href="blog.html" class="nav-link">Blog</a>
        <a href="contact.html" class="nav-link">Contact</a>
    </nav>
</header>

<main class="main-content">

    <!-- HERO -->
    <section class="hero">
        <div class="hero-content">
            <h2>Pure Island Energy</h2>
            <p class="hero-sub">Traditional Maldivian flavor meets modern performance. Fuel your adventures with nature's finest ingredients.</p>
            <a href="products.html" class="btn-primary hero-btn">Explore Products</a>
        </div>
    </section>

    <!-- STATS -->
    <section class="stats-grid">
        <div class="stat-card">
            <span class="stat-number">100%</span>
            <span class="stat-label">Natural Ingredients</span>
        </div>
        <div class="stat-card">
            <span class="stat-number">10+</span>
            <span class="stat-label">Blog Articles</span>
        </div>
        <div class="stat-card">
            <span class="stat-number">5★</span>
            <span class="stat-label">Customer Rating</span>
        </div>
        <div class="stat-card">
            <span class="stat-number">24/7</span>
            <span class="stat-label">Support Available</span>
        </div>
    </section>

    <!-- FEATURED PRODUCT -->
    <section class="featured-product">
        <div class="section-header">
            <h2 class="section-title">Featured Product</h2>
            <a href="products.html" class="section-link">View All Products →</a>
        </div>
        
        <div class="card product-card featured-card">
            <img src="https://images.unsplash.com/photo-1600891964599-f61ba0e24092?auto=format&fit=crop&w=800&q=80"
                 alt="Garudhiya Energy Drink"
                 class="product-img">

            <div class="product-info">
                <h3 class="product-title">Garudhiya Energy Drink</h3>
                <p class="product-description">
                    Low-calorie, kelp-infused, natural caffeine. The perfect boost for island life. Experience sustained energy from traditional Maldivian ingredients that have fueled generations.
                </p>
                <div class="price-and-action">
                    <span class="price-badge">$4.99</span>
                    <a href="products.html" class="btn-primary buy-btn">Learn More</a>
                </div>
            </div>
        </div>
    </section>

    <!-- LATEST BLOG POSTS -->
    <section>
        <div class="section-header">
            <h2 class="section-title">Latest from Our Blog</h2>
            <a href="blog.html" class="section-link">View All Posts →</a>
        </div>
        
        <div id="latestBlogPosts" class="blog-preview-grid"></div>
    </section>

    <!-- NEWSLETTER CTA -->
    <section class="cta-section text-center mt-2 mb-2">
        <h2>Stay Fresh</h2>
        <p>Get new recipes, product drops, and exclusive island discounts delivered to your inbox.</p>

        <form id="newsletterForm" class="contact-form" novalidate>
            <div class="form-group">
                <input type="email"
                       name="email"
                       id="newsletter-email"
                       placeholder=" "
                       required>
                <label for="newsletter-email">Your e-mail</label>
                <p class="error-msg">Please enter a valid e-mail.</p>
            </div>
            <button type="submit" class="btn-primary">Subscribe</button>
        </form>
        <div id="toast" class="toast hidden"></div>
    </section>

</main>

<footer class="site-footer">
    © 2025 Garudhiya • All rights reserved
</footer>

<script src="assets/js/blog-data.js"></script>
<script src="assets/js/script.js"></script>
<script>
// Load latest 3 blog posts on homepage
document.addEventListener('DOMContentLoaded', () => {
    const container = document.getElementById('latestBlogPosts');
    if (!container) return;

    // Sort blogs by date (newest first)
    const sortedBlogs = [...BLOGS].sort((a, b) => {
        const dateCompare = new Date(b.date) - new Date(a.date);
        return dateCompare !== 0 ? dateCompare : b.id - a.id;
    });

    const latestPosts = sortedBlogs.slice(0, 3);

    latestPosts.forEach(post => {
        const card = document.createElement('article');
        card.className = 'card blog-card';

        const img = document.createElement('img');
        img.dataset.src = post.img;
        img.alt = post.title;
        img.className = 'blog-img';
        card.appendChild(img);

        const info = document.createElement('div');
        info.className = 'blog-info';

        const title = document.createElement('h3');
        title.className = 'blog-title';
        title.textContent = post.title;
        info.appendChild(title);

        const meta = document.createElement('p');
        meta.className = 'blog-meta';
        meta.textContent = `${post.author} • ${new Date(post.date).toLocaleDateString()}`;
        info.appendChild(meta);

        const excerpt = document.createElement('p');
        excerpt.className = 'blog-excerpt';
        excerpt.textContent = post.excerpt;
        info.appendChild(excerpt);

        const readMore = document.createElement('a');
        readMore.className = 'btn-secondary blog-readmore';
        readMore.href = `blog-detail.html?id=${post.id}`;
        readMore.textContent = 'Read More';
        info.appendChild(readMore);

        card.appendChild(info);
        container.appendChild(card);
    });

    initLazyImages();
});

// Global search functionality
const globalSearchInput = document.getElementById('globalSearch');
if (globalSearchInput) {
    globalSearchInput.addEventListener('input', (e) => {
        const query = e.target.value.toLowerCase().trim();
        
        if (query.length < 2) return;

        // Search in blog posts
        const blogResults = BLOGS.filter(post => 
            post.title.toLowerCase().includes(query) ||
            post.excerpt.toLowerCase().includes(query) ||
            post.author.toLowerCase().includes(query)
        );

        // You can add product search here when you have product data
        
        console.log('Search results:', blogResults);
        // You could display results in a dropdown here
    });
}
</script>
</body>
</html>
