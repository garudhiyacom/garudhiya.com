<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Garudhiya — Blog Detail</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>

<header class="site-header">
    <a href="index.html" class="logo-link"><h1 class="logo">Garudhiya</h1></a>

    <div class="hamburger" aria-label="Toggle navigation" role="button" tabindex="0">
        <span></span><span></span><span></span>
    </div>

    <nav class="site-nav">
        <div class="search-container">
            <svg class="search-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"></circle>
                <path d="m21 21-4.35-4.35"></path>
            </svg>
            <input type="text" id="blogSearch" class="search-bar" placeholder="Search blog posts...">
        </div>
        <a href="index.html" class="nav-link">Home</a>
        <a href="products.html" class="nav-link">Products</a>
        <a href="blog.html" class="nav-link active">Blog</a>
        <a href="contact.html" class="nav-link">Contact</a>
    </nav>
</header>

<main class="main-content">
    <article id="blogDetail" class="blog-detail">
        <!-- Content will be injected by JavaScript -->
    </article>
</main>

<footer class="site-footer">
    © 2025 Garudhiya • All rights reserved
</footer>

<script src="assets/js/blog-data.js"></script>
<script src="assets/js/script.js"></script>

<script>
/* ---------- Helper ---------- */
function getQueryParam(name) {
    return new URLSearchParams(window.location.search).get(name);
}

/* ---------- Render Blog Detail ---------- */
function renderBlogDetail() {
    const id = Number(getQueryParam('id'));
    const post = BLOGS.find(p => p.id === id);
    const container = document.getElementById('blogDetail');

    if (!post) {
        container.innerHTML = `
            <h2 class="text-center mt-2 mb-2">Post Not Found</h2>
            <p class="text-center">Sorry, we couldn't locate the article you're looking for.</p>
            <p class="text-center"><a href="blog.html" class="btn-primary">Back to Blog</a></p>
        `;
        return;
    }

    container.innerHTML = `
        <h2 class="blog-detail-title">${post.title}</h2>
        <p class="blog-detail-meta">${post.author} • ${new Date(post.date).toLocaleDateString()}</p>

        <img data-src="${post.img}"
             src="${post.img}"               <!-- fallback for browsers without lazy‑load -->
             loading="lazy"
             alt="${post.title}"
             class="blog-detail-img">

        <section class="blog-detail-content">
            ${post.content}
        </section>

        <p class="text-center mt-2">
            <a href="blog.html" class="btn-primary" aria-label="Return to blog list">← Back to Blog</a>
        </p>
    `;

    /* Initialise lazy‑image handling (defined in script.js) */
    if (typeof initLazyImages === 'function') {
        initLazyImages();
    }
}

/* ---------- Blog Search (redirect) ---------- */
const blogSearchInput = document.getElementById('blogSearch');
if (blogSearchInput) {
    blogSearchInput.addEventListener('keypress', e => {
        if (e.key === 'Enter') {
            const query = e.target.value.trim();
            if (query) {
                window.location.href = `blog.html?q=${encodeURIComponent(query)}`;
            }
        }
    });
}

/* ---------- Run on page load ---------- */
document.addEventListener('DOMContentLoaded', renderBlogDetail);
</script>
</body>
</html>
